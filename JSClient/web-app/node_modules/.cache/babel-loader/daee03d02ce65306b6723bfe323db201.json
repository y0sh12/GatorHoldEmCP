{"ast":null,"code":"var _jsxFileName = \"/Users/KadoAruleeswar/Networking/GatorHoldEmCP/JSClient/web-app/src/Home/Home.js\";\nimport React, { Component } from 'react';\nimport './Home.css';\nimport { Link, Redirect } from \"react-router-dom\";\nimport userData from \"../axiosCalls.js\";\nimport Login from \"../Login/Login\";\nimport Lobby from \"../Lobby/Lobby\";\nimport ChangePassword from \"../ChangePassword/ChangePassword\";\nimport Header from \"../BasicComponents/Header\";\nimport io from \"socket.io-client\";\nimport { Alert, Form, Button, Spinner, Modal, Nav, InputGroup } from 'react-bootstrap';\nimport { socket, setSocket } from \"../socket.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleJoinCreate = event => {\n      event.preventDefault();\n\n      if (this.state.balance > 50) {\n        this.setState({\n          isLoading: true\n        });\n        setSocket(io(\"http://0.0.0.0:5001\", {\n          reconnection: false,\n          transports: ['websocket']\n        }));\n        this.handlers();\n        socket.emit(\"goto_room\", this.state.roomID);\n      } else {\n        this.setState({\n          isError: \"Your balance is under $50!\"\n        });\n      }\n    };\n\n    this.handleReset = event => {\n      event.preventDefault();\n      userData.getID(this.props.location.state.username).then(response => {\n        console.log(response);\n        userData.resetBalance({\n          id: response\n        }).then(response2 => {\n          console.log(response2);\n\n          if (response2.isReset == true) {\n            this.setState({\n              isReset: true\n            });\n            userData.getBalance(this.props.location.state.username).then(response3 => {\n              this.setState({\n                balance: response3\n              });\n            });\n            this.setState({\n              isError: ''\n            });\n          }\n        });\n      });\n    };\n\n    this.state = {\n      balance: null,\n      isLoggedIn: true,\n      stillIn: true,\n      isError: '',\n      isReset: false,\n      isLoading: false,\n      roomID: '',\n      in_room: false,\n      isLoading: false,\n      modal: false,\n      is_vip: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleJoinCreate = this.handleJoinCreate.bind(this);\n    this.handlers = this.handlers.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n  }\n\n  handlers() {\n    socket.on(\"connect\", () => {\n      console.log(\"Welcome!\");\n      console.log(\"You have successfully connected to the Gator Hold \\'em server!\");\n    });\n    socket.on(\"joined_room\", (message, room) => {\n      console.log(message);\n      socket.emit('my_name', this.props.location.state.username, this.state.roomID);\n      this.setState({\n        in_room: true\n      });\n    });\n    socket.on(\"user_connection\", message => {\n      console.log(message);\n    });\n    socket.on(\"vip\", () => {\n      this.setState({\n        is_vip: true\n      });\n      console.log(\"You are the VIP\");\n    });\n    socket.on(\"disconnect\", () => {\n      console.log(\"Disconnected!!\");\n    });\n    socket.on(\"connection_error\", error => {\n      switch (error) {\n        case \"Unauthorized\":\n          this.setState({\n            isError: \"The game has started or has reached the maximum players limit!\"\n          });\n          this.setState({\n            isLoading: false\n          });\n          this.setState({\n            isReset: false\n          });\n          break;\n\n        case \"Error: Balance under 50\":\n          this.setState({\n            isError: \"Your balance is under $50!\"\n          });\n          this.setState({\n            isLoading: false\n          });\n          break;\n\n        case \"Error: Account server unreachable\":\n          this.setState({\n            isError: \"Account server unreachable\"\n          });\n          this.setState({\n            isLoading: false\n          });\n          break;\n      }\n\n      socket.disconnect();\n    });\n  }\n\n  componentWillMount() {\n    if (typeof this.props.location.state === 'undefined') {\n      this.setState({\n        isLoggedIn: false\n      });\n    }\n  }\n\n  componentDidMount() {\n    if (typeof this.props.location.state === 'undefined') {\n      this.setState({\n        isLoggedIn: false\n      });\n    } else {\n      userData.getBalance(this.props.location.state.username).then(response => {\n        this.setState({\n          balance: response\n        });\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (socket != null) {\n      socket.off('connect');\n      socket.off('joined_room');\n      socket.off('user_connection');\n      socket.off('vip');\n      socket.off('disconnect');\n      socket.off('connection_error');\n    }\n  }\n\n  handleChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  render() {\n    if (!this.state.isLoggedIn) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/Login\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }, this);\n    } else if (this.state.in_room) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/Lobby\",\n          state: {\n            username: this.props.location.state.username,\n            is_vip: this.state.is_vip,\n            roomID: this.state.roomID\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }, this);\n    } else if (!this.state.stillIn) {\n      console.log(\"Herrrrrrrr\");\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/ChangePassword\",\n          state: {\n            username: this.props.location.state.username\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Modal, {\n          centered: true,\n          size: \"sm\",\n          show: this.state.modal,\n          onHide: () => {\n            this.setState({\n              modal: false\n            });\n          },\n          children: [/*#__PURE__*/_jsxDEV(Modal.Body, {\n            children: \"Are you sure you want to sign out?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: () => {\n                this.setState({\n                  modal: false\n                });\n              },\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"danger\",\n              onClick: () => {\n                this.setState({\n                  isLoggedIn: false\n                });\n              },\n              children: \"SIGN OUT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"body\", {\n          children: [/*#__PURE__*/_jsxDEV(Nav, {\n            style: {\n              margin: \"1vw\"\n            },\n            className: \"justify-content-between\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              onClick: () => {\n                this.setState({\n                  modal: true\n                });\n              },\n              variant: \"danger\",\n              children: \"SIGN OUT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                style: {\n                  width: \"1.5rem\",\n                  height: \"1.5rem\"\n                },\n                src: \"images/User.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 20\n              }, this), \"  Welcome \", this.props.location.state.username, \" !\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/images/LOGO.png\",\n            alt: \"Logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"HOME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            style: {\n              display: \"inline-block\",\n              width: \"25vw\",\n              marginBottom: \"3vh\"\n            },\n            onSubmit: this.handleJoinCreate,\n            children: [/*#__PURE__*/_jsxDEV(Alert, {\n              dismissible: true,\n              onClose: () => this.setState({\n                isReset: false\n              }),\n              show: this.state.isReset === true,\n              variant: \"primary\",\n              children: \"Balance has been reset to $1000!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Alert, {\n              dismissible: true,\n              onClose: () => this.setState({\n                isError: ''\n              }),\n              show: this.state.isError != '',\n              variant: \"danger\",\n              children: this.state.isError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                style: {\n                  float: \"left\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                  children: \"Lobby ID*: \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 62\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  style: {\n                    fontSize: \"0.7em\"\n                  },\n                  children: \"(max of 8 characters)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 80\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n                children: [/*#__PURE__*/_jsxDEV(InputGroup.Prepend, {\n                  children: /*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      style: {\n                        width: \"1.2em\",\n                        height: \"1.2em\"\n                      },\n                      src: \"images/ID.png\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 217,\n                      columnNumber: 46\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 29\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  maxLength: \"8\",\n                  required: true,\n                  type: \"text\",\n                  placeholder: \"Enter New/Existing Lobby ID\",\n                  name: \"roomID\",\n                  value: this.state.roomID,\n                  onChange: this.handleChange.bind(this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: this.state.isLoading,\n              style: {\n                color: \"blue\"\n              },\n              variant: \"warning\",\n              type: \"submit\",\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"JOIN LOBBY\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 120\n              }, this), this.state.isLoading && /*#__PURE__*/_jsxDEV(Spinner, {\n                animation: \"border\",\n                color: \"blue\",\n                size: \"sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 46\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Your balance: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [\"$\", this.state.balance]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Nav, {\n            style: {\n              margin: \"2rem\"\n            },\n            className: \"justify-content-around\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              disabled: this.state.balance === 1000,\n              variant: \"danger\",\n              onClick: this.handleReset,\n              children: \"RESET BALANCE!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                color: \"blue\"\n              },\n              variant: \"warning\",\n              onClick: () => {\n                this.setState({\n                  stillIn: false\n                });\n              },\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"CHANGE PASSWORD\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 119\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 230,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/KadoAruleeswar/Networking/GatorHoldEmCP/JSClient/web-app/src/Home/Home.js"],"names":["React","Component","Link","Redirect","userData","Login","Lobby","ChangePassword","Header","io","Alert","Form","Button","Spinner","Modal","Nav","InputGroup","socket","setSocket","Home","constructor","props","handleJoinCreate","event","preventDefault","state","balance","setState","isLoading","reconnection","transports","handlers","emit","roomID","isError","handleReset","getID","location","username","then","response","console","log","resetBalance","id","response2","isReset","getBalance","response3","isLoggedIn","stillIn","in_room","modal","is_vip","handleChange","bind","on","message","room","error","disconnect","componentWillMount","componentDidMount","componentWillUnmount","off","target","name","value","render","pathname","margin","width","height","display","marginBottom","float","fontSize","color"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,YAAP;AACA,SAAQC,IAAR,EAAcC,QAAd,QAA6B,kBAA7B;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,OAAOC,MAAP,MAAmB,2BAAnB;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,SAAQC,KAAR,EAAeC,IAAf,EAAqBC,MAArB,EAA6BC,OAA7B,EAAsCC,KAAtC,EAA6CC,GAA7C,EAAkDC,UAAlD,QAAmE,iBAAnE;AACA,SAAQC,MAAR,EAAgBC,SAAhB,QAAgC,cAAhC;;;AAEA,eAAe,MAAMC,IAAN,SAAmBlB,SAAnB,CAA6B;AACxCmB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAwGvBC,gBAxGuB,GAwGHC,KAAD,IAAU;AACzBA,MAAAA,KAAK,CAACC,cAAN;;AACA,UAAG,KAAKC,KAAL,CAAWC,OAAX,GAAqB,EAAxB,EAA2B;AAC3B,aAAKC,QAAL,CAAc;AAACC,UAAAA,SAAS,EAAC;AAAX,SAAd;AACAV,QAAAA,SAAS,CAACT,EAAE,CAAC,qBAAD,EAAwB;AACpCoB,UAAAA,YAAY,EAAE,KADsB;AAEpCC,UAAAA,UAAU,EAAE,CAAC,WAAD;AAFwB,SAAxB,CAAH,CAAT;AAIA,aAAKC,QAAL;AACAd,QAAAA,MAAM,CAACe,IAAP,CAAY,WAAZ,EAAyB,KAAKP,KAAL,CAAWQ,MAApC;AACC,OARD,MASI;AACA,aAAKN,QAAL,CAAc;AAACO,UAAAA,OAAO,EAAE;AAAV,SAAd;AACH;AAEJ,KAvHsB;;AAAA,SAyHvBC,WAzHuB,GAyHRZ,KAAD,IAAW;AACrBA,MAAAA,KAAK,CAACC,cAAN;AACApB,MAAAA,QAAQ,CAACgC,KAAT,CAAe,KAAKf,KAAL,CAAWgB,QAAX,CAAoBZ,KAApB,CAA0Ba,QAAzC,EACCC,IADD,CACOC,QAAD,IAAc;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACApC,QAAAA,QAAQ,CAACuC,YAAT,CAAsB;AAACC,UAAAA,EAAE,EAACJ;AAAJ,SAAtB,EACKD,IADL,CACWM,SAAD,IAAe;AACjBJ,UAAAA,OAAO,CAACC,GAAR,CAAYG,SAAZ;;AACA,cAAGA,SAAS,CAACC,OAAV,IAAqB,IAAxB,EAA6B;AACzB,iBAAKnB,QAAL,CAAc;AAACmB,cAAAA,OAAO,EAAC;AAAT,aAAd;AACA1C,YAAAA,QAAQ,CAAC2C,UAAT,CAAoB,KAAK1B,KAAL,CAAWgB,QAAX,CAAoBZ,KAApB,CAA0Ba,QAA9C,EACCC,IADD,CACOS,SAAD,IAAe;AACjB,mBAAKrB,QAAL,CAAc;AAACD,gBAAAA,OAAO,EAACsB;AAAT,eAAd;AACH,aAHD;AAIA,iBAAKrB,QAAL,CAAc;AAACO,cAAAA,OAAO,EAAC;AAAT,aAAd;AACH;AACJ,SAXL;AAYC,OAfL;AAgBH,KA3IsB;;AAEf,SAAKT,KAAL,GAAa;AACTC,MAAAA,OAAO,EAAE,IADA;AAETuB,MAAAA,UAAU,EAAC,IAFF;AAGTC,MAAAA,OAAO,EAAC,IAHC;AAIThB,MAAAA,OAAO,EAAC,EAJC;AAKTY,MAAAA,OAAO,EAAC,KALC;AAMTlB,MAAAA,SAAS,EAAC,KAND;AAOTK,MAAAA,MAAM,EAAE,EAPC;AAQTkB,MAAAA,OAAO,EAAC,KARC;AASTvB,MAAAA,SAAS,EAAC,KATD;AAUTwB,MAAAA,KAAK,EAAC,KAVG;AAWTC,MAAAA,MAAM,EAAE;AAXC,KAAb;AAcA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKjC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBiC,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKxB,QAAL,GAAgB,KAAKA,QAAL,CAAcwB,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKpB,WAAL,GAAmB,KAAKA,WAAL,CAAiBoB,IAAjB,CAAsB,IAAtB,CAAnB;AACH;;AAGLxB,EAAAA,QAAQ,GAAG;AAEPd,IAAAA,MAAM,CAACuC,EAAP,CAAU,SAAV,EAAqB,MAAM;AAC3Bf,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAY,gEAAZ;AACC,KAHD;AAKAzB,IAAAA,MAAM,CAACuC,EAAP,CAAU,aAAV,EAAyB,CAACC,OAAD,EAAUC,IAAV,KAAmB;AACxCjB,MAAAA,OAAO,CAACC,GAAR,CAAYe,OAAZ;AACAxC,MAAAA,MAAM,CAACe,IAAP,CAAY,SAAZ,EAAuB,KAAKX,KAAL,CAAWgB,QAAX,CAAoBZ,KAApB,CAA0Ba,QAAjD,EAA2D,KAAKb,KAAL,CAAWQ,MAAtE;AACA,WAAKN,QAAL,CAAc;AAACwB,QAAAA,OAAO,EAAE;AAAV,OAAd;AACD,KAJH;AAMElC,IAAAA,MAAM,CAACuC,EAAP,CAAU,iBAAV,EAA8BC,OAAD,IAAa;AACxChB,MAAAA,OAAO,CAACC,GAAR,CAAYe,OAAZ;AACD,KAFD;AAIAxC,IAAAA,MAAM,CAACuC,EAAP,CAAU,KAAV,EAAiB,MAAM;AACrB,WAAK7B,QAAL,CAAc;AAAC0B,QAAAA,MAAM,EAAE;AAAT,OAAd;AACAZ,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ;AACD,KAHD;AAKAzB,IAAAA,MAAM,CAACuC,EAAP,CAAU,YAAV,EAAwB,MAAM;AAC1Bf,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH,KAFD;AAIAzB,IAAAA,MAAM,CAACuC,EAAP,CAAU,kBAAV,EAA+BG,KAAD,IAAW;AACvC,cAAOA,KAAP;AACI,aAAK,cAAL;AACI,eAAKhC,QAAL,CAAc;AAACO,YAAAA,OAAO,EAAE;AAAV,WAAd;AACA,eAAKP,QAAL,CAAc;AAACC,YAAAA,SAAS,EAAC;AAAX,WAAd;AACA,eAAKD,QAAL,CAAc;AAACmB,YAAAA,OAAO,EAAC;AAAT,WAAd;AACA;;AACJ,aAAK,yBAAL;AACI,eAAKnB,QAAL,CAAc;AAACO,YAAAA,OAAO,EAAE;AAAV,WAAd;AACA,eAAKP,QAAL,CAAc;AAACC,YAAAA,SAAS,EAAC;AAAX,WAAd;AACA;;AACJ,aAAK,mCAAL;AACI,eAAKD,QAAL,CAAc;AAACO,YAAAA,OAAO,EAAE;AAAV,WAAd;AACA,eAAKP,QAAL,CAAc;AAACC,YAAAA,SAAS,EAAC;AAAX,WAAd;AACA;AAbR;;AAeAX,MAAAA,MAAM,CAAC2C,UAAP;AACD,KAjBD;AAkBL;;AAEGC,EAAAA,kBAAkB,GAAE;AAChB,QAAG,OAAO,KAAKxC,KAAL,CAAWgB,QAAX,CAAoBZ,KAA3B,KAAqC,WAAxC,EAAoD;AAChD,WAAKE,QAAL,CAAc;AAACsB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACH;AACJ;;AAEDa,EAAAA,iBAAiB,GAAG;AAChB,QAAG,OAAO,KAAKzC,KAAL,CAAWgB,QAAX,CAAoBZ,KAA3B,KAAqC,WAAxC,EAAoD;AAChD,WAAKE,QAAL,CAAc;AAACsB,QAAAA,UAAU,EAAE;AAAb,OAAd;AACH,KAFD,MAGI;AACD7C,MAAAA,QAAQ,CAAC2C,UAAT,CAAoB,KAAK1B,KAAL,CAAWgB,QAAX,CAAoBZ,KAApB,CAA0Ba,QAA9C,EACCC,IADD,CACOC,QAAD,IAAc;AAChB,aAAKb,QAAL,CAAc;AAACD,UAAAA,OAAO,EAACc;AAAT,SAAd;AACH,OAHD;AAIF;AACJ;;AAELuB,EAAAA,oBAAoB,GAAE;AAClB,QAAG9C,MAAM,IAAG,IAAZ,EAAiB;AACjBA,MAAAA,MAAM,CAAC+C,GAAP,CAAW,SAAX;AACA/C,MAAAA,MAAM,CAAC+C,GAAP,CAAW,aAAX;AACA/C,MAAAA,MAAM,CAAC+C,GAAP,CAAW,iBAAX;AACA/C,MAAAA,MAAM,CAAC+C,GAAP,CAAW,KAAX;AACA/C,MAAAA,MAAM,CAAC+C,GAAP,CAAW,YAAX;AACA/C,MAAAA,MAAM,CAAC+C,GAAP,CAAW,kBAAX;AACC;AAEJ;;AAGDV,EAAAA,YAAY,CAAC/B,KAAD,EAAQ;AAChB,SAAKI,QAAL,CAAc;AAAC,OAACJ,KAAK,CAAC0C,MAAN,CAAaC,IAAd,GAAqB3C,KAAK,CAAC0C,MAAN,CAAaE;AAAnC,KAAd;AACD;;AAwCCC,EAAAA,MAAM,GAAG;AACL,QAAG,CAAC,KAAK3C,KAAL,CAAWwB,UAAf,EAA0B;AACtB,0BACI,QAAC,QAAD;AACA,QAAA,EAAE,EAAE;AACAoB,UAAAA,QAAQ,EAAE;AADV;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAOH,KARD,MASK,IAAG,KAAK5C,KAAL,CAAW0B,OAAd,EAAsB;AACvB,0BACI,QAAC,QAAD;AACA,QAAA,EAAE,EAAE;AACAkB,UAAAA,QAAQ,EAAE,QADV;AAEA5C,UAAAA,KAAK,EAAC;AACFa,YAAAA,QAAQ,EAAE,KAAKjB,KAAL,CAAWgB,QAAX,CAAoBZ,KAApB,CAA0Ba,QADlC;AAEFe,YAAAA,MAAM,EAAC,KAAK5B,KAAL,CAAW4B,MAFhB;AAGFpB,YAAAA,MAAM,EAAC,KAAKR,KAAL,CAAWQ;AAHhB;AAFN;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAYH,KAbI,MAcA,IAAG,CAAC,KAAKR,KAAL,CAAWyB,OAAf,EAAuB;AACxBT,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,0BACI,QAAC,QAAD;AACA,QAAA,EAAE,EAAE;AACA2B,UAAAA,QAAQ,EAAE,iBADV;AAEA5C,UAAAA,KAAK,EAAC;AACFa,YAAAA,QAAQ,EAAE,KAAKjB,KAAL,CAAWgB,QAAX,CAAoBZ,KAApB,CAA0Ba;AADlC;AAFN;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ;AAUH,KAZI,MAaD;AACJ,0BACI;AAAA,gCACA,QAAC,KAAD;AAAO,UAAA,QAAQ,MAAf;AAAgB,UAAA,IAAI,EAAC,IAArB;AAA0B,UAAA,IAAI,EAAE,KAAKb,KAAL,CAAW2B,KAA3C;AAAkD,UAAA,MAAM,EAAE,MAAM;AAAC,iBAAKzB,QAAL,CAAc;AAACyB,cAAAA,KAAK,EAAC;AAAP,aAAd;AAA6B,WAA9F;AAAA,kCACI,QAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI,QAAC,KAAD,CAAO,MAAP;AAAA,oCACA,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAC,WAAhB;AAA4B,cAAA,OAAO,EAAE,MAAM;AAAC,qBAAKzB,QAAL,CAAc;AAACyB,kBAAAA,KAAK,EAAC;AAAP,iBAAd;AAA6B,eAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,eAEA,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAG,QAAlB;AAA2B,cAAA,OAAO,EAAI,MAAM;AAAC,qBAAKzB,QAAL,CAAc;AAACsB,kBAAAA,UAAU,EAAC;AAAZ,iBAAd;AAAkC,eAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADA,eAQA;AAAA,kCACI,QAAC,GAAD;AAAK,YAAA,KAAK,EAAI;AAACqB,cAAAA,MAAM,EAAC;AAAR,aAAd;AAA8B,YAAA,SAAS,EAAC,yBAAxC;AAAA,oCACA,QAAC,MAAD;AAAQ,cAAA,OAAO,EAAI,MAAM;AAAC,qBAAK3C,QAAL,CAAc;AAACyB,kBAAAA,KAAK,EAAC;AAAP,iBAAd;AAA4B,eAAtD;AAAwD,cAAA,OAAO,EAAG,QAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,eAEA;AAAA,sCAAG;AAAK,gBAAA,KAAK,EAAI;AAACmB,kBAAAA,KAAK,EAAC,QAAP;AAAiBC,kBAAAA,MAAM,EAAC;AAAxB,iBAAd;AAAiD,gBAAA,GAAG,EAAG;AAAvD;AAAA;AAAA;AAAA;AAAA,sBAAH,gBAA6F,KAAKnD,KAAL,CAAWgB,QAAX,CAAoBZ,KAApB,CAA0Ba,QAAvH;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAKI;AAAK,YAAA,GAAG,EAAE,kBAAV;AAA6B,YAAA,GAAG,EAAC;AAAjC;AAAA;AAAA;AAAA;AAAA,kBALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,eAMiB;AAAA;AAAA;AAAA;AAAA,kBANjB,eAOI,QAAC,IAAD;AAAM,YAAA,KAAK,EAAI;AAACmC,cAAAA,OAAO,EAAC,cAAT;AAAyBF,cAAAA,KAAK,EAAC,MAA/B;AAAuCG,cAAAA,YAAY,EAAE;AAArD,aAAf;AAA4E,YAAA,QAAQ,EAAE,KAAKpD,gBAA3F;AAAA,oCACA,QAAC,KAAD;AAAO,cAAA,WAAW,MAAlB;AAAmB,cAAA,OAAO,EAAI,MAAM,KAAKK,QAAL,CAAc;AAACmB,gBAAAA,OAAO,EAAC;AAAT,eAAd,CAApC;AAAqE,cAAA,IAAI,EAAI,KAAKrB,KAAL,CAAWqB,OAAX,KAAuB,IAApG;AAA0G,cAAA,OAAO,EAAG,SAApH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADA,eAEA,QAAC,KAAD;AAAO,cAAA,WAAW,MAAlB;AAAmB,cAAA,OAAO,EAAI,MAAM,KAAKnB,QAAL,CAAc;AAACO,gBAAAA,OAAO,EAAC;AAAT,eAAd,CAApC;AAAgE,cAAA,IAAI,EAAI,KAAKT,KAAL,CAAWS,OAAX,IAAsB,EAA9F;AAAkG,cAAA,OAAO,EAAG,QAA5G;AAAA,wBAAsH,KAAKT,KAAL,CAAWS;AAAjI;AAAA;AAAA;AAAA;AAAA,oBAFA,eAGI,QAAC,IAAD,CAAM,KAAN;AAAA,sCACI,QAAC,IAAD,CAAM,KAAN;AAAY,gBAAA,KAAK,EAAI;AAACyC,kBAAAA,KAAK,EAAC;AAAP,iBAArB;AAAA,wCAAqC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAArC,eAAuD;AAAG,kBAAA,KAAK,EAAI;AAACC,oBAAAA,QAAQ,EAAC;AAAV,mBAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAvD;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI,QAAC,UAAD;AAAA,wCACI,QAAC,UAAD,CAAY,OAAZ;AAAA,yCACA,QAAC,UAAD,CAAY,IAAZ;AAAA,2CAAiB;AAAK,sBAAA,KAAK,EAAI;AAACL,wBAAAA,KAAK,EAAC,OAAP;AAAgBC,wBAAAA,MAAM,EAAC;AAAvB,uBAAd;AAA+C,sBAAA,GAAG,EAAG;AAArD;AAAA;AAAA;AAAA;AAAA;AAAjB;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAIA,QAAC,IAAD,CAAM,OAAN;AAAc,kBAAA,SAAS,EAAG,GAA1B;AAA8B,kBAAA,QAAQ,MAAtC;AAAuC,kBAAA,IAAI,EAAC,MAA5C;AAAmD,kBAAA,WAAW,EAAC,6BAA/D;AAA6F,kBAAA,IAAI,EAAE,QAAnG;AAA4G,kBAAA,KAAK,EAAE,KAAK/C,KAAL,CAAWQ,MAA9H;AAAsI,kBAAA,QAAQ,EAAE,KAAKqB,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB;AAAhJ;AAAA;AAAA;AAAA;AAAA,wBAJA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHJ,eAYI;AAAA;AAAA;AAAA;AAAA,oBAZJ,eAaI,QAAC,MAAD;AAAQ,cAAA,QAAQ,EAAI,KAAK9B,KAAL,CAAWG,SAA/B;AAA0C,cAAA,KAAK,EAAI;AAACiD,gBAAAA,KAAK,EAAC;AAAP,eAAnD;AAAmE,cAAA,OAAO,EAAC,SAA3E;AAAqF,cAAA,IAAI,EAAC,QAA1F;AAAA,sCAAmG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAnG,EACC,KAAKpD,KAAL,CAAWG,SAAX,iBAAwB,QAAC,OAAD;AAAS,gBAAA,SAAS,EAAC,QAAnB;AAA4B,gBAAA,KAAK,EAAG,MAApC;AAA2C,gBAAA,IAAI,EAAC;AAAhD;AAAA;AAAA;AAAA;AAAA,sBADzB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ,eAwBA;AAAA,sDAAkB;AAAA,8BAAK,KAAKH,KAAL,CAAWC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA,kBAxBA,eAyBA,QAAC,GAAD;AAAK,YAAA,KAAK,EAAI;AAAC4C,cAAAA,MAAM,EAAC;AAAR,aAAd;AAA+B,YAAA,SAAS,EAAG,wBAA3C;AAAA,oCACI,QAAC,MAAD;AAAQ,cAAA,QAAQ,EAAI,KAAK7C,KAAL,CAAWC,OAAX,KAAuB,IAA3C;AAAiD,cAAA,OAAO,EAAG,QAA3D;AAAoE,cAAA,OAAO,EAAI,KAAKS,WAApF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,MAAD;AAAQ,cAAA,KAAK,EAAI;AAAC0C,gBAAAA,KAAK,EAAC;AAAP,eAAjB;AAAiC,cAAA,OAAO,EAAC,SAAzC;AAAmD,cAAA,OAAO,EAAI,MAAM;AAAC,qBAAKlD,QAAL,CAAc;AAACuB,kBAAAA,OAAO,EAAC;AAAT,iBAAd;AAA+B,eAApG;AAAA,qCAAsG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAtG;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAzBA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARA;AAAA,sBADJ;AAyCA;AACH;;AA/NuC","sourcesContent":["import React, { Component } from 'react'\nimport './Home.css';\nimport {Link, Redirect} from \"react-router-dom\";\nimport userData from \"../axiosCalls.js\";\nimport Login from \"../Login/Login\";\nimport Lobby from \"../Lobby/Lobby\";\nimport ChangePassword from \"../ChangePassword/ChangePassword\"\nimport Header from \"../BasicComponents/Header\"\nimport io from \"socket.io-client\";\nimport {Alert, Form, Button, Spinner, Modal, Nav, InputGroup} from 'react-bootstrap'\nimport {socket, setSocket} from \"../socket.js\"\n\nexport default class Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            balance: null,\n            isLoggedIn:true,\n            stillIn:true,\n            isError:'',\n            isReset:false,\n            isLoading:false,\n            roomID: '',\n            in_room:false,\n            isLoading:false,\n            modal:false,\n            is_vip: false\n        }\n\n        this.handleChange = this.handleChange.bind(this);\n        this.handleJoinCreate = this.handleJoinCreate.bind(this);\n        this.handlers = this.handlers.bind(this);\n        this.handleReset = this.handleReset.bind(this);\n    }\n\n\nhandlers() {\n\n    socket.on(\"connect\", () => {\n    console.log(\"Welcome!\")\n    console.log(\"You have successfully connected to the Gator Hold \\'em server!\")\n    });\n\n    socket.on(\"joined_room\", (message, room) => {\n        console.log(message)\n        socket.emit('my_name', this.props.location.state.username, this.state.roomID);\n        this.setState({in_room: true})\n      });\n\n      socket.on(\"user_connection\", (message) => {\n        console.log(message)\n      });\n\n      socket.on(\"vip\", () => {\n        this.setState({is_vip: true})\n        console.log(\"You are the VIP\")\n      });\n\n      socket.on(\"disconnect\", () => {\n          console.log(\"Disconnected!!\");\n      });\n\n      socket.on(\"connection_error\", (error) => {\n        switch(error){\n            case \"Unauthorized\":\n                this.setState({isError: \"The game has started or has reached the maximum players limit!\"})\n                this.setState({isLoading:false});\n                this.setState({isReset:false});\n                break;\n            case \"Error: Balance under 50\":\n                this.setState({isError: \"Your balance is under $50!\"})\n                this.setState({isLoading:false});\n                break;\n            case \"Error: Account server unreachable\":\n                this.setState({isError: \"Account server unreachable\"})\n                this.setState({isLoading:false});\n                break;\n        }\n        socket.disconnect();\n      });\n}\n\n    componentWillMount(){\n        if(typeof this.props.location.state === 'undefined'){\n            this.setState({isLoggedIn: false});\n        }\n    }\n\n    componentDidMount() {\n        if(typeof this.props.location.state === 'undefined'){\n            this.setState({isLoggedIn: false});\n        }\n        else{\n           userData.getBalance(this.props.location.state.username)\n           .then((response) => {\n               this.setState({balance:response});\n           })\n        }\n    } \n\ncomponentWillUnmount(){\n    if(socket!= null){\n    socket.off('connect');\n    socket.off('joined_room');\n    socket.off('user_connection');\n    socket.off('vip');\n    socket.off('disconnect');\n    socket.off('connection_error');\n    }\n\n}\n\n\nhandleChange(event) {\n    this.setState({[event.target.name]: event.target.value});\n  }\n\nhandleJoinCreate = (event) =>{\n    event.preventDefault();\n    if(this.state.balance > 50){\n    this.setState({isLoading:true});\n    setSocket(io(\"http://0.0.0.0:5001\", {\n    reconnection: false,\n    transports: ['websocket']\n    }));\n    this.handlers();    \n    socket.emit(\"goto_room\", this.state.roomID);\n    }\n    else{\n        this.setState({isError: \"Your balance is under $50!\"});\n    }\n\n}\n\nhandleReset = (event) => {\n    event.preventDefault();\n    userData.getID(this.props.location.state.username)\n    .then((response) => {\n        console.log(response)\n        userData.resetBalance({id:response})\n            .then((response2) => {\n                console.log(response2);\n                if(response2.isReset == true){\n                    this.setState({isReset:true});\n                    userData.getBalance(this.props.location.state.username)\n                    .then((response3) => {\n                        this.setState({balance:response3});\n                    });\n                    this.setState({isError:''});\n                }\n            })\n        });\n}\n\n\n    render() {\n        if(!this.state.isLoggedIn){\n            return(\n                <Redirect\n                to={{\n                    pathname: \"/Login\"\n                }}\n                />\n            )\n        }\n        else if(this.state.in_room){\n            return(\n                <Redirect\n                to={{\n                    pathname: \"/Lobby\",\n                    state:{\n                        username: this.props.location.state.username,\n                        is_vip:this.state.is_vip,\n                        roomID:this.state.roomID\n                    }\n                }}\n                />\n            )\n        }\n        else if(!this.state.stillIn){\n            console.log(\"Herrrrrrrr\");\n            return(\n                <Redirect\n                to={{\n                    pathname: \"/ChangePassword\",\n                    state:{\n                        username: this.props.location.state.username,\n                    }\n                }}\n                />\n            )\n        }\n        else{\n        return (\n            <>\n            <Modal centered size=\"sm\" show={this.state.modal} onHide={() => {this.setState({modal:false})}} >\n                <Modal.Body>Are you sure you want to sign out?</Modal.Body>\n                <Modal.Footer> \n                <Button variant=\"secondary\" onClick={() => {this.setState({modal:false})}}>Close</Button>\n                <Button variant = \"danger\" onClick = {() => {this.setState({isLoggedIn:false})}}>SIGN OUT</Button>\n                </Modal.Footer>\n            </Modal>\n            <body>\n                <Nav style = {{margin:\"1vw\"}} className=\"justify-content-between\"> \n                <Button onClick = {() => {this.setState({modal:true})}} variant = \"danger\">SIGN OUT</Button>\n                <b><img style = {{width:\"1.5rem\", height:\"1.5rem\"}} src = \"images/User.png\"></img>  Welcome {this.props.location.state.username} !</b>\n                </Nav>\n                <img src= '/images/LOGO.png' alt=\"Logo\" />\n                <h3>HOME</h3><br></br>\n                <Form style = {{display:\"inline-block\", width:\"25vw\", marginBottom: \"3vh\"}} onSubmit={this.handleJoinCreate}>\n                <Alert dismissible onClose = {() => this.setState({isReset:false})}  show = {this.state.isReset === true} variant = \"primary\">Balance has been reset to $1000!</Alert>                    \n                <Alert dismissible onClose = {() => this.setState({isError:''})}show = {this.state.isError != ''} variant = \"danger\">{this.state.isError}</Alert>\n                    <Form.Group >\n                        <Form.Label style = {{float:\"left\"}}><b>Lobby ID*: </b><i style = {{fontSize:\"0.7em\"}}>(max of 8 characters)</i></Form.Label>\n                        <InputGroup>\n                            <InputGroup.Prepend>\n                            <InputGroup.Text><img style = {{width:\"1.2em\", height:\"1.2em\"}} src = \"images/ID.png\"></img></InputGroup.Text>\n                        </InputGroup.Prepend>\n                        <Form.Control maxLength = \"8\" required type=\"text\" placeholder=\"Enter New/Existing Lobby ID\" name= \"roomID\" value={this.state.roomID} onChange={this.handleChange.bind(this)} />\n                        </InputGroup>\n                    </Form.Group>\n                    <br></br>\n                    <Button disabled = {this.state.isLoading} style = {{color:\"blue\"}} variant=\"warning\" type=\"submit\"><b>JOIN LOBBY</b>\n                    {this.state.isLoading && <Spinner animation=\"border\" color = \"blue\" size=\"sm\"></Spinner>}\n                    </Button>\n                </Form>\n            <h5>Your balance: <b>${this.state.balance}</b></h5>\n            <Nav style = {{margin:\"2rem\"}} className = \"justify-content-around\">\n                <Button disabled = {this.state.balance === 1000} variant = \"danger\" onClick = {this.handleReset}>RESET BALANCE!</Button>\n                <Button style = {{color:\"blue\"}} variant=\"warning\" onClick = {() => {this.setState({stillIn:false})}}><b>CHANGE PASSWORD</b></Button>\n            </Nav>\n                </body>\n            </>\n        )\n       }\n    }\n}\n"]},"metadata":{},"sourceType":"module"}