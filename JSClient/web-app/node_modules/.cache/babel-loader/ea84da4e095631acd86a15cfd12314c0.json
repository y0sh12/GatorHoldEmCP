{"ast":null,"code":"var _jsxFileName = \"/Users/KadoAruleeswar/Networking/GatorHoldEmCP/JSClient/web-app/src/Lobby/Lobby.js\";\nimport React, { Component } from 'react';\nimport Home from \"../Home/Home\";\nimport Game from \"../Game/Game\";\nimport './Lobby.css';\nimport Header from \"../BasicComponents/Header\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport userData from \"../axiosCalls.js\";\nimport { socket } from \"../socket.js\";\nimport { Alert, ListGroup, Button, ListGroupItem, Modal, Spinner, Nav } from 'react-bootstrap';\nimport ModalHeader from 'react-bootstrap/esm/ModalHeader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class Lobby extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderPlayer = (player, index) => {\n      return /*#__PURE__*/_jsxDEV(ListGroupItem, {\n        horizontal: true,\n        variant: \"primary\",\n        style: {\n          marginBottom: \"2vh\"\n        },\n        children: [index === 0 && /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"HOST: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: player._name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 14\n        }, this), (this.props.location.state.is_vip || this.state.is_vip) && index != 0 && /*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            color: \"black\"\n          },\n          variant: \"danger\",\n          onClick: () => this.handleRemove(index),\n          children: \" REMOVE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 14\n        }, this)]\n      }, player._client_number, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this);\n    };\n\n    this.handleRemove = index => {\n      socket.emit('remove_player', [this.props.location.state.roomID, index]);\n    };\n\n    this.handleLeave = event => {\n      event.preventDefault();\n      socket.disconnect();\n    };\n\n    this.startGame = event => {\n      event.preventDefault();\n      this.setState({\n        isLoading: true\n      });\n\n      if (this.state.theList.length < 2) {\n        this.setState({\n          isError: \"Must have atleast two players in the lobby to start the game!\"\n        });\n        this.setState({\n          isLoading: false\n        });\n      } else {\n        socket.emit('start_game', this.props.location.state.roomID);\n      }\n    };\n\n    this.state = {\n      balance: null,\n      isLoggedIn: true,\n      isError: '',\n      is_vip: false,\n      goBack: false,\n      stillIn: true,\n      isLoading: false,\n      modal: false,\n      theList: [],\n      start: false\n    };\n    this.renderPlayer = this.renderPlayer.bind(this);\n    this.handleLeave = this.handleLeave.bind(this);\n    this.handleRemove = this.handleRemove.bind(this);\n    this.startGame = this.startGame.bind(this);\n  }\n\n  componentWillMount() {\n    if (typeof this.props.location.state === 'undefined') {\n      this.setState({\n        isLoggedIn: false\n      });\n    }\n  }\n\n  componentDidMount() {\n    //Get Player Balance\n    if (typeof this.props.location.state === 'undefined') {\n      this.setState({\n        isLoggedIn: false\n      });\n    } else {\n      userData.getBalance(this.props.location.state.username).then(response => {\n        this.setState({\n          balance: response\n        });\n      });\n    } //Socket Handlers\n\n\n    if (socket != null) {\n      socket.on(\"left_room\", message => {\n        console.log(message);\n        socket.emit('active_player_list', this.props.location.state.roomID, pl_list => {\n          this.setState({\n            theList: pl_list\n          });\n        });\n      });\n      socket.on(\"user_connection\", message => {\n        console.log(message);\n        console.log(new Date().getMilliseconds());\n        socket.emit('active_player_list', this.props.location.state.roomID, pl_list => {\n          this.setState({\n            theList: pl_list\n          });\n        });\n        console.log(new Date().getMilliseconds());\n      });\n      socket.on(\"vip\", () => {\n        this.setState({\n          is_vip: true\n        });\n        console.log(\"You are the VIP\");\n      });\n      socket.on(\"disconnect\", () => {\n        console.log(\"Disconnected!!\");\n        this.setState({\n          stillIn: false\n        });\n      });\n      socket.on(\"message\", message => {\n        if (message === \"Game Starting...\") {\n          this.setState({\n            start: true\n          });\n          console.log(message);\n        }\n      });\n      socket.emit('active_player_list', this.props.location.state.roomID, pl_list => {\n        this.setState({\n          theList: pl_list\n        });\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (socket != null) {\n      socket.off('get_list');\n      socket.off('left_room');\n      socket.off('user_connection');\n      socket.off('vip');\n      socket.off('disconnect');\n      socket.off('message');\n    }\n  }\n\n  render() {\n    if (!this.state.isLoggedIn) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/Login\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this);\n    } else if (!this.state.stillIn) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/Home\",\n          state: {\n            username: this.props.location.state.username\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this);\n    } else if (this.state.start) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/Game\",\n          state: {\n            username: this.props.location.state.username,\n            roomID: this.props.location.state.roomID,\n            is_vip: this.state.is_vip || this.props.location.state.is_vip,\n            theList: this.state.theList\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Modal, {\n          variant: \"warning\",\n          centered: true,\n          size: \"sm\",\n          show: this.state.modal,\n          onHide: () => {\n            this.setState({\n              modal: false\n            });\n          },\n          children: [/*#__PURE__*/_jsxDEV(Modal.Body, {\n            children: \"Are you sure you want to leave the lobby?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: () => {\n                this.setState({\n                  modal: false\n                });\n              },\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"danger\",\n              onClick: this.handleLeave,\n              children: \"Leave Lobby\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"body\", {\n          children: [/*#__PURE__*/_jsxDEV(Nav, {\n            style: {\n              margin: \"1rem\"\n            },\n            className: \"justify-content-between\",\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"danger\",\n              onClick: () => {\n                this.setState({\n                  modal: true\n                });\n              },\n              children: \"Back to Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                style: {\n                  width: \"1.5rem\",\n                  height: \"1.5rem\"\n                },\n                src: \"images/User.png\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 20\n              }, this), \"  Welcome \", this.props.location.state.username, \" !\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/images/LOGO.png\",\n            alt: \"Logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"LOBBY: \", this.props.location.state.roomID]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n            style: {\n              display: \"inline-block\",\n              width: \"20%\",\n              marginTop: \"2vh\",\n              marginBottom: \"2vh\"\n            },\n            variant: \"flush\",\n            children: [(this.props.location.state.is_vip || this.state.is_vip) && /*#__PURE__*/_jsxDEV(Alert, {\n              dismissible: true,\n              onClose: () => this.setState({\n                isError: ''\n              }),\n              show: this.state.isError != '',\n              variant: \"danger\",\n              children: this.state.isError\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 77\n            }, this), this.state.theList.map((player, index) => {\n              return this.renderPlayer(player, index);\n            }), (this.props.location.state.is_vip || this.state.is_vip) && /*#__PURE__*/_jsxDEV(Button, {\n              style: {\n                color: \"blue\"\n              },\n              variant: \"warning\",\n              onClick: this.startGame,\n              children: [/*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"START GAME\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 155\n              }, this), this.state.isLoading && /*#__PURE__*/_jsxDEV(Spinner, {\n                animation: \"border\",\n                color: \"blue\",\n                size: \"sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 42\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 77\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 17\n          }, this), !this.props.location.state.is_vip && !this.state.is_vip && /*#__PURE__*/_jsxDEV(\"i\", {\n            children: \"Waiting for host to start game...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 80\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Your balance: \", /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [\"$\", this.state.balance]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true);\n    }\n  }\n\n}","map":{"version":3,"sources":["/Users/KadoAruleeswar/Networking/GatorHoldEmCP/JSClient/web-app/src/Lobby/Lobby.js"],"names":["React","Component","Home","Game","Header","Link","Redirect","userData","socket","Alert","ListGroup","Button","ListGroupItem","Modal","Spinner","Nav","ModalHeader","Lobby","constructor","props","renderPlayer","player","index","marginBottom","_name","location","state","is_vip","color","handleRemove","_client_number","emit","roomID","handleLeave","event","preventDefault","disconnect","startGame","setState","isLoading","theList","length","isError","balance","isLoggedIn","goBack","stillIn","modal","start","bind","componentWillMount","componentDidMount","getBalance","username","then","response","on","message","console","log","pl_list","Date","getMilliseconds","componentWillUnmount","off","render","pathname","margin","width","height","display","marginTop","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Home from \"../Home/Home\";\nimport Game from \"../Game/Game\";\nimport './Lobby.css';\nimport Header from \"../BasicComponents/Header\"\nimport {Link, Redirect} from \"react-router-dom\";\nimport userData from \"../axiosCalls.js\";\nimport {socket} from \"../socket.js\"\nimport {Alert, ListGroup, Button, ListGroupItem, Modal, Spinner, Nav} from 'react-bootstrap'\nimport ModalHeader from 'react-bootstrap/esm/ModalHeader';\n\nexport default class Lobby extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            balance: null,\n            isLoggedIn:true,\n            isError:'',\n            is_vip:false,\n            goBack:false,\n            stillIn:true,\n            isLoading:false,\n            modal:false,\n            theList: [],\n            start:false\n        };\n        this.renderPlayer = this.renderPlayer.bind(this)\n        this.handleLeave = this.handleLeave.bind(this);\n        this.handleRemove = this.handleRemove.bind(this);\n        this.startGame = this.startGame.bind(this);\n    }\n\n    componentWillMount(){\n        if(typeof this.props.location.state === 'undefined'){\n            this.setState({isLoggedIn: false});\n        }\n    }\n\n\n    componentDidMount() {\n        //Get Player Balance\n        if(typeof this.props.location.state === 'undefined'){\n            this.setState({isLoggedIn: false});\n        }\n        else{\n            userData.getBalance(this.props.location.state.username)\n            .then((response) => {\n                this.setState({balance:response});\n            })\n        }\n        //Socket Handlers\n        if(socket != null){\n        socket.on(\"left_room\", (message) => {\n            console.log(message)\n            socket.emit('active_player_list', this.props.location.state.roomID, (pl_list) => {\n                this.setState({theList:pl_list});\n            });\n        });\n        socket.on(\"user_connection\", (message) => {\n            console.log(message)\n           console.log((new Date()).getMilliseconds());\n            socket.emit('active_player_list', this.props.location.state.roomID, (pl_list) => {\n                this.setState({theList:pl_list});\n            });\n            console.log((new Date()).getMilliseconds());\n        });\n        socket.on(\"vip\", () => {\n            this.setState({is_vip: true})\n            console.log(\"You are the VIP\")\n        });\n        socket.on(\"disconnect\", () => {\n            console.log(\"Disconnected!!\");\n            this.setState({stillIn:false}); \n        });\n        socket.on(\"message\", (message) => {\n            if(message === \"Game Starting...\"){\n                    this.setState({start:true});\n                    console.log(message);\n            }\n        })\n        socket.emit('active_player_list', this.props.location.state.roomID, (pl_list) => {\n            this.setState({theList:pl_list});\n        });\n    }\n    }\n\n    componentWillUnmount(){\n        if(socket!= null){\n        socket.off('get_list');\n        socket.off('left_room');\n        socket.off('user_connection');\n        socket.off('vip');\n        socket.off('disconnect');\n        socket.off('message');\n        }\n    \n    }\n\n\n    renderPlayer = (player, index) => {  \n        return(\n            <ListGroupItem horizontal key ={player._client_number} variant=\"primary\" style = {{marginBottom: \"2vh\"}}>\n            {index === 0 && <b>HOST: </b>}\n             <b>{player._name}</b>\n             {(this.props.location.state.is_vip || this.state.is_vip) && index != 0 &&\n             <Button style = {{color:\"black\"}} variant = \"danger\" onClick = {() => this.handleRemove(index)}> REMOVE</Button>}\n            </ListGroupItem>\n        )\n    }\n\n    handleRemove = (index) => {\n        socket.emit('remove_player', [this.props.location.state.roomID, index]);\n    }\n\n\n    handleLeave = (event) => {\n        event.preventDefault();\n        socket.disconnect();\n    }\n\n    startGame = (event) => {\n        event.preventDefault();\n        this.setState({isLoading:true});\n        if(this.state.theList.length <2 ){\n            this.setState({isError: \"Must have atleast two players in the lobby to start the game!\"})\n            this.setState({isLoading:false});\n        }\n        else{\n        socket.emit('start_game', this.props.location.state.roomID);\n        }\n    }\n\n    render() {\n        if(!this.state.isLoggedIn){\n            return(\n                <Redirect\n                to={{\n                    pathname: \"/Login\"\n                }}\n                />\n            )\n        }\n        else if(!this.state.stillIn){\n            return(\n                <Redirect\n                to={{\n                    pathname: \"/Home\",\n                    state:{\n                        username: this.props.location.state.username\n                    }\n\n                }}\n                />\n            )\n        }\n        else if(this.state.start){\n            return(\n                <Redirect\n                to={{\n                    pathname: \"/Game\",\n                    state:{\n                        username: this.props.location.state.username,\n                        roomID:this.props.location.state.roomID,\n                        is_vip:this.state.is_vip || this.props.location.state.is_vip,\n                        theList:this.state.theList\n                    }\n\n                }}\n                />\n            )\n        }\n        else{\n        return (\n            <>\n            <Modal variant = \"warning\" centered size=\"sm\" show={this.state.modal} onHide={() => {this.setState({modal:false})}} >\n                <Modal.Body>Are you sure you want to leave the lobby?</Modal.Body>\n                <Modal.Footer> \n                <Button variant=\"secondary\" onClick={() => {this.setState({modal:false})}}>Close</Button>\n                <Button variant = \"danger\" onClick = {this.handleLeave}>Leave Lobby</Button>\n                </Modal.Footer>\n            </Modal>\n            <body>\n            <Nav style = {{margin:\"1rem\"}} className=\"justify-content-between\">\n                <Button variant = \"danger\" onClick = {() => {this.setState({modal:true})}}>Back to Home</Button>\n                <b><img style = {{width:\"1.5rem\", height:\"1.5rem\"}} src = \"images/User.png\"></img>  Welcome {this.props.location.state.username} !</b>               \n            </Nav>\n            <img src= '/images/LOGO.png' alt=\"Logo\" />\n            <br></br>\n            <h3>LOBBY: {this.props.location.state.roomID}</h3>\n                <ListGroup style = {{display:\"inline-block\", width:\"20%\", marginTop: \"2vh\", marginBottom:\"2vh\"}} variant=\"flush\">\n                {(this.props.location.state.is_vip || this.state.is_vip) && <Alert dismissible onClose = {() => this.setState({isError:''})}show = {this.state.isError != ''} variant = \"danger\">{this.state.isError}</Alert>}\n                {this.state.theList.map((player, index)=> {return this.renderPlayer(player, index)})}\n                {(this.props.location.state.is_vip || this.state.is_vip) && <Button style = {{color:\"blue\"}} variant=\"warning\" onClick = {this.startGame}><b>START GAME</b>\n                {this.state.isLoading && <Spinner animation=\"border\" color = \"blue\" size=\"sm\"></Spinner>}\n                </Button>} \n                </ListGroup>\n                <br></br>\n                {(!this.props.location.state.is_vip && !this.state.is_vip) &&  <i>Waiting for host to start game...</i>}\n                <h5>Your balance: <b>${this.state.balance}</b></h5>\n                </body>\n            </>\n        )\n    }\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}